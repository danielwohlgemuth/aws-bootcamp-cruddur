#! /usr/bin/bash

LABEL="frontend build"

CYAN='\033[1;36m'
NO_COLOR='\033[0m'
printf "${CYAN}== ${LABEL}${NO_COLOR}\n"

bin_path=$(dirname "$(readlink -f "$BASH_SOURCE")")
frontend_path="${bin_path}/../../frontend-react-js"

docker build \
    --build-arg REACT_APP_BACKEND_URL="https://api.cruddur-dw.com" \
    --build-arg REACT_APP_HONEYCOMB_API_KEY="${HONEYCOMB_API_KEY}" \
    --build-arg REACT_APP_AWS_PROJECT_REGION="${AWS_DEFAULT_REGION}" \
    --build-arg REACT_APP_AWS_COGNITO_REGION="${AWS_DEFAULT_REGION}" \
    --build-arg REACT_APP_AWS_USER_POOL_ID="${AWS_USER_POOL_ID}" \
    --build-arg REACT_APP_AWS_USER_POOL_CLIENT_ID="${AWS_USER_POOL_CLIENT_ID}" \
    -t frontend-react-js \
    -f ${frontend_path}/Dockerfile.prod \
    ${frontend_path}
